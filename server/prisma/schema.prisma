// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  @@map("user")
  id Int @id @default(autoincrement())
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  username String
  password String
  roleId Int @default(1)
  role Role @relation(fields: [roleId], references: [id])
}

model Good {
  @@map("good")
  id Int @id @default(autoincrement())
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  name String
  restCount Int @map("rest_count")
  cover String 
  productionData DateTime @map("production_data")
  address String
}

model Permission {
  @@map("permission")
  id Int @id @unique
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  type Int // 1 是菜单权限， 2 是功能权限
  parentId Int? @map("parent_id")
  name String
  value String
  roles RoleToPermission[]
}

model Role {
  @@map("role")
   id Int @id @default(autoincrement())
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  permissions RoleToPermission[]
  users User[]
  name String
  remark String?
}

model RoleToPermission {
  role Role @relation(fields: [roleId], references: [id])
  roleId Int
  permission Permission @relation(fields: [permissionId], references: [id])
  permissionId Int
  @@id([roleId, permissionId])
}